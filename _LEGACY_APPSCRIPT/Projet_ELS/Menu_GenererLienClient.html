<div class="client-link-dialog" role="dialog" aria-labelledby="client-link-title" aria-describedby="client-link-desc">
  <style>
    .client-link-dialog {
      font-family: 'Montserrat', sans-serif;
      line-height: 1.5;
      color: #1b263b;
    }
    .client-link-dialog h3 {
      margin: 0 0 8px;
      color: #8e44ad;
      font-size: 1.2rem;
    }
    .client-link-dialog p {
      margin: 0 0 12px;
    }
    .client-link-dialog label {
      font-weight: 600;
      display: block;
      margin-bottom: 4px;
    }
    .client-link-dialog input[type="text"] {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #5dade2;
      border-radius: 999px;
      font-size: 0.95rem;
      color: #1b263b;
      background-color: #fff;
    }
    .client-link-dialog input[type="text"]:focus {
      outline: 2px solid #3498db;
      outline-offset: 2px;
    }
    .client-link-dialog .actions {
      margin-top: 12px;
      text-align: right;
    }
    .client-link-dialog button {
      font-family: 'Montserrat', sans-serif;
      border: none;
      border-radius: 999px;
      padding: 10px 20px;
      font-size: 0.95rem;
      color: #fff;
      background: linear-gradient(90deg, #8e44ad, #3498db);
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .client-link-dialog button:focus-visible {
      outline: 2px solid #5dade2;
      outline-offset: 3px;
    }
    .client-link-dialog button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(53, 152, 219, 0.35);
    }
    .client-link-dialog .copy-status {
      margin-top: 8px;
      font-size: 0.85rem;
      color: #3498db;
    }
  </style>
  <h3 id="client-link-title">Lien Espace Client</h3>
  <p id="client-link-desc">Ce lien expire à&nbsp;: <span id="client-link-expiration"><?!= linkExpiration ?></span></p>
  <label for="client-link-url">Lien signé</label>
  <input id="client-link-url" type="text" value="<?!= signedUrl ?>" readonly aria-live="polite" />
  <div class="actions">
    <button id="copy-btn" type="button">Copier</button>
  </div>
  <div id="copy-status" class="copy-status" role="status" aria-live="polite"></div>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var copyButton = document.getElementById('copy-btn');
    var urlInput = document.getElementById('client-link-url');
    var status = document.getElementById('copy-status');

    function updateStatus(message, success) {
      if (!status) {
        return;
      }
      status.textContent = message;
      status.style.color = success ? '#3498db' : '#8e44ad';
    }

    function copyLink() {
      if (!urlInput) {
        updateStatus('Champ introuvable.', false);
        return;
      }
      urlInput.select();
      try {
        var succeeded = document.execCommand('copy');
        updateStatus(succeeded ? 'Lien copié dans le presse-papiers.' : 'Copie impossible.', succeeded);
      } catch (err) {
        updateStatus('Copie non supportée dans ce navigateur.', false);
      }
    }

    if (copyButton) {
      copyButton.addEventListener('click', copyLink);
    }
  });
</script>
